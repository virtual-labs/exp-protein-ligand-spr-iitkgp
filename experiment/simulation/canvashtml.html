<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas Intersection Color Change</title>
    <style>
        canvas {
            border: 1px solid #000;
        }
    </style>
</head>
<body>
    <canvas id="canvas1" width="400" height="400"></canvas>
    <canvas id="canvas2" width="400" height="400"></canvas>
    <script >

document.addEventListener("DOMContentLoaded", function () {
    const canvas1 = document.getElementById("canvas1");
    const canvas2 = document.getElementById("canvas2");
    const ctx1 = canvas1.getContext("2d");
    const ctx2 = canvas2.getContext("2d");

    // Draw a triangle on canvas1 and a circle on canvas2
    drawTriangle(ctx1, 50, 50, 100, 100, "blue");
    drawCircle(ctx2, 150, 150, 50, "red");

    // Get the intersection and change its color
    const intersectionImageData = getIntersectionImageData(ctx1, ctx2);
    changeIntersectionColor(ctx1, intersectionImageData, "green");
});

function drawTriangle(ctx, x1, y1, x2, y2, color) {
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x1 + x2, y1);
    ctx.lineTo(x1 + x2 / 2, y1 + y2);
    ctx.closePath();
    ctx.fillStyle = color;
    ctx.fill();
}

function drawCircle(ctx, x, y, radius, color) {
    ctx.beginPath();
    ctx.arc(x, y, radius, 0, 2 * Math.PI);
    ctx.fillStyle = color;
    ctx.fill();
}

function getIntersectionImageData(ctx1, ctx2) {
    const imageData1 = ctx1.getImageData(0, 0, ctx1.canvas.width, ctx1.canvas.height);
    const imageData2 = ctx2.getImageData(0, 0, ctx2.canvas.width, ctx2.canvas.height);

    // Iterate through each pixel and get the intersection
    const intersectionData = ctx1.createImageData(ctx1.canvas.width, ctx1.canvas.height);
    for (let i = 0; i < imageData1.data.length; i += 4) {
        intersectionData.data[i] = imageData1.data[i] & imageData2.data[i];
        intersectionData.data[i + 1] = imageData1.data[i + 1] & imageData2.data[i + 1];
        intersectionData.data[i + 2] = imageData1.data[i + 2] & imageData2.data[i + 2];
        intersectionData.data[i + 3] = 255; // Alpha value
    }

    return intersectionData;
}

function changeIntersectionColor(ctx, intersectionImageData, color) {
    ctx.putImageData(intersectionImageData, 0, 0);
    ctx.globalCompositeOperation = "source-in";
    ctx.fillStyle = color;
    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
    ctx.globalCompositeOperation = "source-over"; // Reset the composite operation
}


    </script>



</body>
</html>
